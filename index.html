<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shinees - Anime & Manga Platform</title>
    <!-- Scripts de Firebase (importante que est√©n en el <head>) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap' );
        
        :root {
            --primary: #ff6b1a; --secondary: #23252b; --accent: #f47521; --text: #ffffff; --text-secondary: #a0a0a0; --bg: #000000; --bg-secondary: #141519; --bg-card: #1a1b1f; --border: #2a2b30;
        }
        [data-theme="light"] {
            --primary: #ff6b1a; --secondary: #ffffff; --text: #23252b; --text-secondary: #666666; --bg: #f5f5f5; --bg-secondary: #ffffff; --bg-card: #ffffff; --border: #e0e0e0;
        }
        [data-theme="girl"] {
            --primary: #ff69b4; --secondary: #ffc0cb; --text: #4b0082; --text-secondary: #9370db; --bg: #fff0f5; --bg-secondary: #ffe4e1; --bg-card: #ffdab9; --border: #ffc0cb;
        }
        [data-theme="boy"] {
            --primary: #1e90ff; --secondary: #00bfff; --text: #ffffff; --text-secondary: #add8e6; --bg: #191970; --bg-secondary: #4682b4; --bg-card: #5f9ea0; --border: #00bfff;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        header { background: var(--bg-secondary); padding: 0 20px; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border); }
        .header-container { max-width: 1400px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; height: 60px; }
        .logo-3d { font-family: 'Bebas Neue', cursive; font-size: 2.5rem; font-weight: bold; background: linear-gradient(45deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 30px rgba(255, 107, 26, 0.5); animation: float 3s ease-in-out infinite; cursor: pointer; transition: all 0.3s ease; perspective: 1000px; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotateX(0); } 50% { transform: translateY(-10px) rotateX(5deg); } }
        .logo-3d:hover { animation: rotate3d 1s ease-in-out; text-shadow: 0 0 50px rgba(255, 107, 26, 0.8); }
        @keyframes rotate3d { 0% { transform: rotateY(0); } 100% { transform: rotateY(360deg); } }
        .main-nav { display: flex; gap: 30px; align-items: center; }
        .nav-link { color: var(--text-secondary); text-decoration: none; font-size: 14px; font-weight: 500; transition: color 0.3s; position: relative; }
        .nav-link:hover { color: var(--primary); }
        .nav-link::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: var(--primary); transition: width 0.3s; }
        .nav-link:hover::after { width: 100%; }
        .search-container { position: relative; flex: 1; max-width: 400px; margin: 0 30px; }
        .search-input { width: 100%; padding: 8px 40px 8px 15px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; color: var(--text); font-size: 14px; transition: all 0.3s; }
        .search-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 10px rgba(255, 107, 26, 0.2); }
        .search-btn { position: absolute; right: 5px; top: 50%; transform: translateY(-50%); background: var(--primary); border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.3s; }
        .search-btn:hover { background: var(--accent); }
        .hero-carousel { position: relative; height: 450px; overflow: hidden; background: var(--bg-secondary); }
        .carousel-slide { position: absolute; width: 100%; height: 100%; opacity: 0; transition: opacity 1s; display: flex; align-items: center; }
        .carousel-slide.active { opacity: 1; }
        .carousel-content { position: relative; z-index: 2; padding: 0 60px; max-width: 600px; }
        .carousel-title { font-size: 3rem; font-weight: bold; margin-bottom: 20px; animation: slideInLeft 1s; }
        @keyframes slideInLeft { from { transform: translateX(-50px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .carousel-description { font-size: 1.1rem; margin-bottom: 30px; color: var(--text-secondary); }
        .watch-btn { background: var(--primary); color: white; border: none; padding: 12px 30px; border-radius: 25px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 10px; }
        .watch-btn:hover { background: var(--accent); transform: scale(1.05); }
        .carousel-image { position: absolute; right: 0; top: 0; width: 60%; height: 100%; object-fit: cover; mask-image: linear-gradient(to right, transparent, black 30%); -webkit-mask-image: linear-gradient(to right, transparent, black 30%); }
        .content-section { padding: 40px 20px; max-width: 1400px; margin: 0 auto; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .section-title { font-size: 1.8rem; font-weight: bold; }
        .view-all { color: var(--primary); text-decoration: none; font-weight: 500; display: flex; align-items: center; gap: 5px; transition: gap 0.3s; }
        .view-all:hover { gap: 10px; }
        .anime-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .anime-card { background: var(--bg-card); border-radius: 10px; overflow: hidden; transition: transform 0.3s, box-shadow 0.3s; cursor: pointer; position: relative; opacity: 0; }
        .anime-card:hover { transform: translateY(-10px); box-shadow: 0 10px 30px rgba(255, 107, 26, 0.3); }
        .anime-card img { width: 100%; height: 250px; object-fit: cover; }
        .anime-info { padding: 15px; }
        .anime-title { font-weight: 600; margin-bottom: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .anime-meta { font-size: 12px; color: var(--text-secondary); }
        .anime-badge { position: absolute; top: 10px; right: 10px; background: var(--primary); color: white; padding: 5px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; }
        .user-menu { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 35px; height: 35px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.3s; font-weight: bold; }
        .user-avatar:hover { transform: scale(1.1); }
        .theme-toggle { background: none; border: none; color: var(--text); font-size: 20px; cursor: pointer; transition: transform 0.3s; }
        .theme-toggle:hover { transform: rotate(180deg); }
        .library-filters { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 20px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; color: var(--text); cursor: pointer; transition: all 0.3s; }
        .filter-btn:hover, .filter-btn.active { background: var(--primary); border-color: var(--primary); }
        footer { background: var(--bg-secondary); padding: 40px 20px 20px; margin-top: 60px; border-top: 1px solid var(--border); }
        .footer-content { max-width: 1400px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 30px; }
        .footer-section h3 { margin-bottom: 15px; color: var(--primary); }
        .footer-links { list-style: none; }
        .footer-links li { margin-bottom: 10px; }
        .footer-links a { color: var(--text-secondary); text-decoration: none; transition: color 0.3s; }
        .footer-links a:hover { color: var(--primary); }
        .footer-bottom { text-align: center; padding-top: 20px; border-top: 1px solid var(--border); color: var(--text-secondary); }
        .social-links { display: flex; gap: 15px; }
        .social-link { width: 40px; height: 40px; background: var(--bg-card); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background 0.3s; text-decoration: none; }
        .social-link:hover { background: var(--primary); }
        @media (max-width: 768px) { .main-nav { display: none; } .search-container { margin: 0 10px; } .carousel-content { padding: 0 20px; } .carousel-title { font-size: 2rem; } .anime-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOutRight { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="header-container">
            <div class="logo-3d" onclick="location.reload()">SHINEES</div>
            <nav class="main-nav">
                <a href="#" class="nav-link">Browse</a><a href="#" class="nav-link">Manga</a><a href="#" class="nav-link">Games</a><a href="#" class="nav-link">Store</a><a href="#" class="nav-link">News</a>
            </nav>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar anime, manga o juegos..." id="searchInput">
                <button class="search-btn">üîç</button>
            </div>
            <div class="user-menu">
                <!-- Contenido din√°mico por JS -->
            </div>
        </div>
    </header>

    <!-- HERO CAROUSEL -->
    <div class="hero-carousel">
        <!-- Contenido din√°mico por JS -->
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main>
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">üî• Tendencias Ahora</h2>
                <a href="#" class="view-all">Ver todo ‚Üí</a>
            </div>
            <div class="anime-grid" id="trending-grid">
                <!-- Contenido din√°mico por JS -->
            </div>
        </section>
        <section class="content-section">
            <div class="section-header">
                <h2 class="section-title">üìö Mi Biblioteca</h2>
                <a href="#" class="view-all">Administrar ‚Üí</a>
            </div>
            <div class="library-filters">
                <button class="filter-btn active">Todo</button><button class="filter-btn">Viendo</button><button class="filter-btn">Completado</button><button class="filter-btn">En espera</button><button class="filter-btn">Abandonado</button>
            </div>
            <div class="anime-grid" id="library-grid">
                <!-- Contenido din√°mico por JS -->
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="footer-content">
            <div class="footer-section"><h3>Navegaci√≥n</h3><ul class="footer-links"><li><a href="#">Inicio</a></li><li><a href="#">Cat√°logo</a></li></ul></div>
            <div class="footer-section"><h3>Cuenta</h3><ul class="footer-links"><li><a href="#">Mi Perfil</a></li><li><a href="#">Cerrar sesi√≥n</a></li></ul></div>
            <div class="footer-section"><h3>Conecta</h3><div class="social-links"><a href="#" class="social-link">üìò</a><a href="#" class="social-link">üê¶</a></div></div>
            <div class="footer-section"><h3>Informaci√≥n</h3><ul class="footer-links"><li><a href="#">Sobre nosotros</a></li><li><a href="#">T√©rminos de uso</a></li></ul></div>
        </div>
        <div class="footer-bottom"><p>¬© 2024 Shinees Platform. Todos los derechos reservados.</p></div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // =================================================================
        // 1. CONFIGURACI√ìN DE FIREBASE (CON TU KEY)
        // =================================================================
        const firebaseConfig = {
            apiKey: "AIzaSyDsv2keytFIEeS4QT4_chwOHMgyWpV8gP4",
            authDomain: "shinees.firebaseapp.com",
            projectId: "shinees",
            storageBucket: "shinees.appspot.com",
            messagingSenderId: "109623976622",
            appId: "1:109623976622:web:c9ab5a1c345f502b71833f",
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // =================================================================
        // 2. L√ìGICA DE LA INTERFAZ (TEMAS, NOTIFICACIONES, ETC.)
        // =================================================================
        let currentTheme = 'dark';
        const themes = ['dark', 'light', 'girl', 'boy'];
        function toggleTheme() {
            const currentIndex = themes.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themes.length;
            currentTheme = themes[nextIndex];
            document.documentElement.setAttribute('data-theme', currentTheme);
            const themeBtn = document.querySelector('.theme-toggle');
            if (themeBtn) {
                const icons = { 'dark': 'üåô', 'light': '‚òÄÔ∏è', 'girl': 'üå∏', 'boy': '‚ö°' };
                themeBtn.textContent = icons[currentTheme];
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `position: fixed; top: 80px; right: 20px; background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#ff6b1a'}; color: white; padding: 15px 20px; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 2000; animation: slideInRight 0.3s forwards;`;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // =================================================================
        // 3. RENDERIZADO DIN√ÅMICO
        // =================================================================
        function renderAuthUI(user) {
            const userMenu = document.querySelector('.user-menu');
            if (!userMenu) return;
            if (user) {
                userMenu.innerHTML = `
                    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
                    <div class="user-avatar" id="user-avatar-btn" title="${user.email}">${user.email.charAt(0).toUpperCase()}</div>`;
            } else {
                userMenu.innerHTML = `
                    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
                    <button class="watch-btn" id="login-btn-header">Iniciar Sesi√≥n</button>`;
            }
        }

        function renderModal(title, content) {
            const modalContainer = document.createElement('div');
            modalContainer.className = 'modal-overlay';
            modalContainer.style.cssText = `position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 2000;`;
            modalContainer.innerHTML = `
                <div class="modal-content" style="background: var(--bg-card); padding: 2rem; border-radius: 16px; width: 90%; max-width: 400px; position: relative;">
                    <button class="modal-close-button" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: var(--text); font-size: 1.5rem; cursor: pointer;">&times;</button>
                    <h2 style="margin-bottom: 1.5rem;">${title}</h2>
                    ${content}
                </div>`;
            document.body.appendChild(modalContainer);
        }

        function renderLoginModal() {
            const formContent = `
                <form id="login-form">
                    <div style="margin-bottom: 1rem;"><label style="display: block; margin-bottom: 0.5rem;">Email:</label><input type="email" id="login-email" class="search-input" required /></div>
                    <div style="margin-bottom: 1rem;"><label style="display: block; margin-bottom: 0.5rem;">Contrase√±a:</label><input type="password" id="login-password" class="search-input" required /></div>
                    <button type="submit" class="watch-btn" style="width:100%;">Entrar</button>
                </form>`;
            renderModal('Iniciar Sesi√≥n', formContent);
        }

        function renderProfileModal(user) {
            const content = `
                <div style="text-align: center;">
                    <div class="user-avatar" style="width: 80px; height: 80px; font-size: 2rem; margin: 0 auto 1rem;">${user.email.charAt(0).toUpperCase()}</div>
                    <h3>${user.displayName || user.email}</h3>
                    <p style="color: var(--text-secondary);">${user.email}</p>
                    <hr style="border-color: var(--border); margin: 1.5rem 0;">
                    <button class="watch-btn" id="logout-btn" style="background: #ef4444; width: 100%;">Cerrar Sesi√≥n</button>
                </div>`;
            renderModal('Mi Perfil', content);
        }

        function renderSeries(seriesData) {
            const trendingGrid = document.getElementById('trending-grid');
            const libraryGrid = document.getElementById('library-grid');
            const carousel = document.querySelector('.hero-carousel');
            
            trendingGrid.innerHTML = '';
            libraryGrid.innerHTML = '';
            carousel.innerHTML = '';

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInUp 0.5s forwards';
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            seriesData.forEach(serie => {
                const cardHTML = `
                    <div class="anime-card" data-id="${serie.id}">
                        ${serie.badge ? `<span class="anime-badge">${serie.badge}</span>` : ''}
                        <img src="${serie.portada || 'https://i.imgur.com/sYJ2s1k.png'}" alt="${serie.titulo}">
                        <div class="anime-info">
                            <div class="anime-title">${serie.titulo}</div>
                            <div class="anime-meta">${serie.tipo} ‚Ä¢ ${serie.a√±o}</div>
                        </div>
                    </div>`;
                
                // A√±adir a la parrilla de tendencias
                trendingGrid.innerHTML += cardHTML;

                // Si est√° en la biblioteca del usuario (simulado )
                if (Math.random() > 0.5) {
                    libraryGrid.innerHTML += cardHTML;
                }

                // Si es destacado, a√±adir al carrusel
                if (serie.destacado) {
                    carousel.innerHTML += `
                        <div class="carousel-slide ${carousel.children.length === 0 ? 'active' : ''}">
                            <div class="carousel-content">
                                <h1 class="carousel-title">${serie.titulo}</h1>
                                <p class="carousel-description">${serie.descripcion || 'Sin descripci√≥n.'}</p>
                                <button class="watch-btn">‚ñ∂ Ver Ahora</button>
                            </div>
                            <img src="${serie.portada}" class="carousel-image">
                        </div>`;
                }
            });

            // Aplicar observador de animaci√≥n a las nuevas tarjetas
            document.querySelectorAll('.anime-card').forEach(card => observer.observe(card));
        }

        // =================================================================
        // 4. L√ìGICA DE DATOS Y ESTADO
        // =================================================================
        auth.onAuthStateChanged(user => {
            renderAuthUI(user);
            if (user) {
                showNotification(`Sesi√≥n iniciada como ${user.email}`, 'success');
            }
        });

        async function main() {
            showNotification('Cargando datos de Shinees...', 'info');
            try {
                const seriesSnapshot = await db.collection('series').get();
                const seriesData = seriesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                
                if (seriesData.length > 0) {
                    renderSeries(seriesData);
                    showNotification('¬°Contenido cargado!', 'success');
                } else {
                    showNotification('No se encontr√≥ contenido en la base de datos.', 'error');
                }
            } catch (error) {
                console.error("Error al cargar datos de Firebase:", error);
                showNotification('Error al conectar con el servidor.', 'error');
            }
        }

        // =================================================================
        // 5. MANEJO DE EVENTOS
        // =================================================================
        document.addEventListener('click', async (e) => {
            // Bot√≥n de login en el header
            if (e.target && e.target.id === 'login-btn-header') {
                renderLoginModal();
            }

            // Bot√≥n para abrir modal de perfil
            if (e.target && e.target.id === 'user-avatar-btn') {
                const user = auth.currentUser;
                if (user) renderProfileModal(user);
            }

            // Bot√≥n para cerrar sesi√≥n
            if (e.target && e.target.id === 'logout-btn') {
                await auth.signOut();
                document.querySelector('.modal-overlay')?.remove();
                showNotification('Has cerrado sesi√≥n.', 'info');
            }

            // Cierre de modales
            if (e.target.classList.contains('modal-close-button') || e.target.classList.contains('modal-overlay')) {
                document.querySelector('.modal-overlay')?.remove();
            }
        });

        // Eventos de formulario
        document.body.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (e.target.id === 'login-form') {
                const email = e.target.querySelector('#login-email').value;
                const password = e.target.querySelector('#login-password').value;
                try {
                    await auth.signInWithEmailAndPassword(email, password);
                    document.querySelector('.modal-overlay')?.remove();
                } catch (error) {
                    showNotification(`Error: ${error.message}`, 'error');
                }
            }
        });

        // =================================================================
        // 6. EJECUCI√ìN INICIAL
        // =================================================================
        main();
    });
    </script>
</body>
</html>

